<script type="text/javascript">
    function renderOneAppt(target_id, appt){
        console.log(appt);
        var content = '<b>'+appt.datetime_begin+'</b><br/>'
        content += '<b>' + appt.service.name + '</b><br/>';
        content += appt.guest.first_name + ' ' + appt.guest.last_name + '<br/>';
        content += 'scheduled w/' + appt.host.first_name + ' ' + appt.host.last_name + '<br/>';
        //content += 'Guest: ' + appt.
        var display = $('<div>', {
            html: content
        });
        console.log(display);
        $('#'+target_id).append(display);
    }
  $(document).ready(function(){
      // get approved appointments and populate in approved tab pane
      $.ajax({
          url: '/account/appointments/approved'
      }).done(function(data){
          //console.log(data);
          $.each(data, function(index, appt){
            //console.log(appt);
            renderOneAppt('appointments_approved', appt);
          });
      });

      // get unapproved appointments and populate in approved tab pane
      $.ajax({
          url: '/account/appointments/unapproved'
      }).done(function(data){
          //console.log(data);
          $.each(data, function(index, appt){
              //console.log(appt);
              renderOneAppt('appointments_unapproved', appt);
          });
      });
  });
</script>

<body>
  <div class="container">
    <div class="row">
      <div class="dropdown">
        <a data-toggle="dropdown" href="#" class="btn btn-default ">Staff <b class="caret"></b></a>
        <ul class="dropdown-menu" role="menu">
          <li><a href="#">First Link</a></li>
          <li><a href="#">Second Link</a></li>
        </ul>
      </div>
    </div> <!-- end of row -->

    <div class="row">
      <div class="col-sm-3">
        <div id="datepicker"></div>
        <div>
          <!-- Nav tabs -->
          <ul class="nav nav-tabs">
            <li class="active"><a href="#home" data-toggle="tab">Scheduled</a></li>
            <li><a href="#profile" data-toggle="tab">Pending</a></li>
          </ul>

          <!-- Tab panes -->
          <div class="tab-content">
            <div class="tab-pane active" id="appointments_approved"></div>
            <div class="tab-pane" id="appointments_unapproved">here are the pending</div>
          </div>
        </div>
      </div>
      <div id="calendar" class="col-sm-9"></div>
    </div><!-- end of row -->

    <div class="row">

    </div> <!-- end of row -->

    <!-- event modal -->
    <div id="createEventModal" class="modal hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel1" aria-hidden="true">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
        <h3 id="myModalLabel1">Create Appointment</h3>
      </div>
      <div class="modal-body">
        <form id="createAppointmentForm" class="form-horizontal">
          <div class="form-group">
            <div class="col-sm-3">
              <div class="dropdown">
                <button class="btn dropdown-toggle sr-only" type="button" id="clientDropdown" data-toggle="dropdown">
                  Client Name
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                  <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Action</a></li>
                </ul>
              </div> <!--end of dropdown -->
            </div>
          </div>

          <br>

          <div class="form-inline">
            <label class="form-control" for="apptStartTime">Start:</label>
            <input id="apptStartTime" class="control-row"/>
            <label class="form-control" for="apptEndTime">End:</label>
            <input id="apptEndTime" class="control-row"/>
          </div>

          <br>

          <div class="form-inline">
            <div class="dropdown">
              <button class="btn dropdown-toggle sr-only" type="button" id="clientDropdown" data-toggle="dropdown">
                Staff name
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Action</a></li>
              </ul>
            </div> <!--end of dropdown -->
          </div>

          <br>

          <div class="form-inline">
            <div class="dropdown">
              <button class="btn dropdown-toggle sr-only" type="button" id="clientDropdown" data-toggle="dropdown">
                Service
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Action</a></li>
              </ul>
            </div> <!--end of dropdown -->
          </div>

          <br>

          <div class="form-inline">
            <div class="dropdown">
              <button class="btn dropdown-toggle sr-only" type="button" id="clientDropdown" data-toggle="dropdown">
                Service type
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Action</a></li>
              </ul>
            </div> <!--end of dropdown -->
          </div>

          <br>

          <div class="form-inline">
            <label class="form-control" for="apptStartTime">Notes: </label>
            <textarea class="control-row"/></textarea>
          </div>

          <br>

          <div class="form-inline">
            <button class="btn btn-default">View payment</button>
          </div>

        </form>
      </div>
      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
        <button type="submit" class="btn btn-primary" id="submitButton">Save</button>
      </div>
    </div> <!-- end of event modal -->

  </div> <!-- end of container -->
</body>
